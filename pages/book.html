<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>গ্যালারি - মুন্সীগঞ্জ পলিটেকনিক রোভার স্কাউট</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* PDF গ্যালারি স্টাইল */
        .pdf-box {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .pdf-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .pdf-preview {
            background: #f8f9fa;
            padding: 30px 20px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        
        .pdf-preview i {
            font-size: 48px;
            color: #e74c3c;
            margin-bottom: 15px;
            display: block;
        }
        
        .pdf-preview p {
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
            font-size: 16px;
        }
        
        .pdf-actions {
            display: flex;
            padding: 15px;
            gap: 10px;
        }
        
        .pdf-action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .view-pdf {
            background: #3498db;
            color: white;
        }
        
        .view-pdf:hover {
            background: #2980b9;
        }
        
        .download-pdf {
            background: #2ecc71;
            color: white;
        }
        
        .download-pdf:hover {
            background: #27ae60;
        }
        
        /* লাইটবক্স স্টাইল */
        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .pdf-viewer-container {
            width: 90%;
            height: 90%;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .pdf-viewer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .pdf-viewer-title {
            font-weight: 600;
            font-size: 18px;
            color: #2c3e50;
        }
        
        .pdf-viewer-actions {
            display: flex;
            gap: 10px;
        }
        
        .pdf-viewer-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background 0.3s ease;
        }
        
        .download-btn {
            background: #2ecc71;
            color: white;
        }
        
        .download-btn:hover {
            background: #27ae60;
        }
        
        .close-btn {
            background: #e74c3c;
            color: white;
        }
        
        .close-btn:hover {
            background: #c0392b;
        }
        
        .pdf-viewer-frame {
            flex: 1;
            width: 100%;
            border: none;
        }
        
        /* গ্যালারি গ্রিড স্টাইল */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        /* লোডিং এবং এরর স্টেট */
        .loading, .error-message {
            text-align: center;
            padding: 40px 20px;
        }
        
        .loading i, .error-message i {
            font-size: 48px;
            margin-bottom: 20px;
            color: #3498db;
        }
        
        .error-message i {
            color: #e74c3c;
        }
        
        .loading p, .error-message p {
            font-size: 18px;
            color: #7f8c8d;
        }
        
        /* মোবাইল রেসপন্সিভ */
        @media (max-width: 768px) {
            .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            
            .pdf-actions {
                flex-direction: column;
            }
            
            .pdf-viewer-container {
                width: 95%;
                height: 95%;
            }
            
            .pdf-viewer-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .pdf-viewer-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>

<body>

<header>
    <div class="container header-container">
        <a href="../index.html" class="logo">
            <img src="../images/logo.png" alt="Logo">
            <div class="logo-text">
                <h1>মুন্সীগঞ্জ পলিটেকনিক ইন্সটিটিউট</h1>
                <p><b>রোভার স্কাউট গ্রুপ</b></p>
            </div>
        </a>

        <nav>
            <div class="mobile-menu">
                <i class="fas fa-bars"></i>
            </div>
            <ul>
                <li><a href="../index.html">হোম</a></li>
                <li><a href="../pages/about.html">আমাদের সম্পর্কে</a></li>
                <li><a href="../pages/activities.html">কার্যক্রম</a></li>

                <li class="dropdown">
                    <a href="#">ক্রু কাউন্সিল <i class="fas fa-caret-down"></i></a>
                    <ul class="dropdown-content">
                        <li><a href="../pages/current-crew-council.html">বর্তমান ক্রু কাউন্সিল</a></li>
                        <li><a href="../pages/crew-council.html">সকল ক্রু কাউন্সিল</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="#">গ্যালারি <i class="fas fa-caret-down"></i></a>
                    <ul class="dropdown-content">
                        <li><a href="../pages/crew_image.html">ক্রু মিটিং এর ছবি সমূহ</a></li>
                        <li><a href="../pages/events.html">সকল কার্যক্রমের ছবি সমূহ</a></li>
                        <li><a href="../pages/hinikg_img.html">হাইকিং এর ছবি সমূহ</a></li>
                        <li><a href="../pages/mut.html">রোভার মুটের ছবি সমূহ</a></li>
                        <li><a href="../pages/dikkha.html">দীক্ষা অনুষ্ঠান</a></li>
                    </ul>
                </li>

                <li><a href="../pages/contact.html">যোগাযোগ</a></li>

                <li class="dropdown">
                    <a href="#">রিসোর্স <i class="fas fa-caret-down"></i></a>
                    <ul class="dropdown-content">
                        <li><a href="../pages/book.html">বই সমূহ </a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>
</header>

<section class="hero" style="background-image: linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6)), url('../images/ScoutBooks_Logo_Web.png.jpg');">
    <div class="container">
        <h2>স্কাউটিং সম্পৃক্ত বই</h2>
        <!-- <p>রোভার স্কাউট কার্যক্রমের স্মৃতি</p> -->
    </div>
</section>

<section class="section">
    <div class="container">
        <div id="loadingState" class="loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>গ্যালারি লোড হচ্ছে...</p>
        </div>

        <div id="errorState" class="error-message" style="display:none;">
            <i class="fas fa-exclamation-circle"></i>
            <p>ডেটা লোড করতে সমস্যা হয়েছে।</p>
        </div>
    </div>
</section>

<section class="section" id="imageGallerySection" style="display:none;">
    <div class="container">
        <div class="section-title">
            <h2>PDF সমূহ</h2>
            <p>মোট <span id="imageCount">0</span> টি PDF ফাইল</p>
        </div>

        <div class="gallery-grid" id="imageGallery"></div>
    </div>
</section>

<footer>
    <div class="container">
        <div class="footer-content">
            <div class="footer-image">
                <img src="../images/logo.png" alt="লোগো">
            </div>
            <div class="footer-column">
                <h3>মুন্সীগঞ্জ পলিটেকনিক রোভার স্কাউট</h3>
                <p>তরুণদের চরিত্র গঠন, নাগরিক দায়িত্ব এবং শারীরিক সুস্থতার জন্য কাজ করছি ১৯৯৫ সাল থেকে।</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>

            <div class="footer-column">
                <h3>দ্রুত লিংক</h3>
                <ul class="footer-links">
                    <li><a href="../index.html">হোম</a></li>
                    <li><a href="about.html">আমাদের সম্পর্কে</a></li>
                    <li><a href="activities.html">কার্যক্রম</a></li>
                    <li><a href="gallery.html">গ্যালারি</a></li>
                    <li><a href="contact.html">যোগাযোগ</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>কার্যক্রম</h3>
                <ul class="footer-links">
                    <li><a href="activities.html">ক্যাম্পিং</a></li>
                    <li><a href="activities.html">সামাজিক সেবা</a></li>
                    <li><a href="activities.html">প্রশিক্ষণ</a></li>
                    <li><a href="activities.html">রক্তদান</a></li>
                    <li><a href="activities.html">বৃক্ষরোপণ</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; ২০২৫ মুন্সীগঞ্জ পলিটেকনিক ইন্সটিটিউট রোভার স্কাউট গ্রুপ। সকল স্বত্ব সংরক্ষিত।</p>
        </div>
    </div>
</footer>

<script src="../js/main.js"></script>

<script>
    let galleryData = {};

    async function loadGalleryData() {
        try {
            // ডেমো ডেটা - আপনার JSON ফাইলটি সঠিক পাথে আছে কিনা নিশ্চিত করুন
            const res = await fetch('../data/pdf-data.json', { cache: 'no-cache' });
            if (!res.ok) throw new Error();

            galleryData = await res.json();

            document.getElementById("loadingState").style.display = "none";
            document.getElementById("imageGallerySection").style.display = "block";

            buildGallery();
            enableLightbox();

        } catch (e) {
            // JSON ফাইল না পাওয়া গেলে ডেমো ডেটা ব্যবহার করুন
            console.log("JSON ফাইল লোড করতে সমস্যা, ডেমো ডেটা ব্যবহার করা হচ্ছে:", e);
            
            // ডেমো ডেটা
            galleryData = {
                pdf: [
                    {
                        url: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",
                        alt: "স্কাউট গাইডলাইন"
                    },
                    {
                        url: "https://www.africau.edu/images/default/sample.pdf",
                        alt: "রোভার কার্যক্রম"
                    },
                    {
                        url: "https://www.orimi.com/pdf-test.pdf",
                        alt: "প্রশিক্ষণ ম্যানুয়াল"
                    },
                    {
                        url: "https://www.clickdimensions.com/links/TestPDFfile.pdf",
                        alt: "ক্যাম্পিং নির্দেশিকা"
                    }
                ]
            };

            document.getElementById("loadingState").style.display = "none";
            document.getElementById("imageGallerySection").style.display = "block";

            buildGallery();
            enableLightbox();
        }
    }

    function buildGallery() {
        const grid = document.getElementById("imageGallery");
        grid.innerHTML = "";

        document.getElementById("imageCount").textContent = galleryData.pdf.length;

        galleryData.pdf.forEach(item => {
            const div = document.createElement("div");
            div.className = "gallery-item";

            div.innerHTML = `
                <div class="pdf-box">
                    <div class="pdf-preview">
                        <i class="fas fa-file-pdf"></i>
                        <p>${item.alt}</p>
                    </div>
                    <div class="pdf-actions">
                        <button class="pdf-action-btn view-pdf">
                            <i class="fas fa-eye"></i> দেখুন
                        </button>
                        <button class="pdf-action-btn download-pdf">
                            <i class="fas fa-download"></i> ডাউনলোড
                        </button>
                    </div>
                </div>
            `;

            grid.appendChild(div);
        });
    }

    function enableLightbox() {
        document.addEventListener("click", e => {
            const box = e.target.closest(".gallery-item");
            if (!box) return;

            const pdfBox = box.querySelector(".pdf-box");
            const viewBtn = box.querySelector(".view-pdf");
            const downloadBtn = box.querySelector(".download-pdf");

            // Handle PDF view button click
            if (viewBtn && e.target.closest(".view-pdf")) {
                const fileName = pdfBox.querySelector("p").textContent;
                const fileData = galleryData.pdf.find(x => x.alt === fileName);

                // যদি কোনো লাইটবক্স ইতিমধ্যে খোলা থাকে, তা বন্ধ করুন
                const existingLightbox = document.querySelector(".lightbox");
                if (existingLightbox) {
                    existingLightbox.remove();
                }

                const overlay = document.createElement("div");
                overlay.className = "lightbox";

                overlay.innerHTML = `
                    <div class="pdf-viewer-container">
                        <div class="pdf-viewer-header">
                            <div class="pdf-viewer-title">${fileName}</div>
                            <div class="pdf-viewer-actions">
                                <button class="pdf-viewer-btn download-btn">
                                    <i class="fas fa-download"></i> ডাউনলোড
                                </button>
                                <button class="pdf-viewer-btn close-btn">
                                    <i class="fas fa-times"></i> বন্ধ করুন
                                </button>
                            </div>
                        </div>
                        <iframe class="pdf-viewer-frame" src="${fileData.url}"></iframe>
                    </div>
                `;

                document.body.appendChild(overlay);

                // Download button in lightbox
                overlay.querySelector(".download-btn").onclick = () => {
                    const link = document.createElement('a');
                    link.href = fileData.url;
                    link.download = fileName + ".pdf";
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                };

                // Close button in lightbox
                overlay.querySelector(".close-btn").onclick = () => overlay.remove();
                overlay.onclick = e => { 
                    if (e.target === overlay) overlay.remove(); 
                };

                document.addEventListener("keydown", function esc(ev) {
                    if (ev.key === "Escape") {
                        overlay.remove();
                        document.removeEventListener("keydown", esc);
                    }
                });
            }

            // Handle PDF download button click
            else if (downloadBtn && e.target.closest(".download-pdf")) {
                const fileName = pdfBox.querySelector("p").textContent;
                const fileData = galleryData.pdf.find(x => x.alt === fileName);
                
                const link = document.createElement('a');
                link.href = fileData.url;
                link.download = fileName + ".pdf";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        });
    }

    // Mobile menu functionality
    document.addEventListener("DOMContentLoaded", () => {
        loadGalleryData();
        
        // // Mobile menu toggle
        // const mobileMenu = document.querySelector(".mobile-menu");
        // const navUl = document.querySelector("nav ul");
        
        if (mobileMenu && navUl) {
            mobileMenu.addEventListener('click', function(e) {
                e.stopPropagation();
                navUl.classList.toggle("show");
            });
            
            // Dropdown functionality for mobile
            const dropdowns = document.querySelectorAll('.dropdown > a');
            dropdowns.forEach(dropdown => {
                dropdown.addEventListener('click', function(e) {
                    if (window.innerWidth <= 768) {
                        e.preventDefault();
                        const parent = this.parentElement;
                        parent.classList.toggle('active');
                    }
                });
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('nav')) {
                    navUl.classList.remove("show");
                    // Also close all dropdowns
                    document.querySelectorAll('.dropdown').forEach(dropdown => {
                        dropdown.classList.remove('active');
                    });
                }
            });
            
            // Close menu when clicking on a link (non-dropdown)
            document.querySelectorAll("nav ul li:not(.dropdown) a").forEach(link => {
                link.addEventListener("click", () => {
                    navUl.classList.remove("show");
                });
            });
            
            // Close menu when clicking on dropdown links
            document.querySelectorAll(".dropdown-content a").forEach(link => {
                link.addEventListener("click", () => {
                    navUl.classList.remove("show");
                    // Also close the parent dropdown
                    link.closest('.dropdown').classList.remove('active');
                });
            });
        }
    });
</script>

</body>
</html>